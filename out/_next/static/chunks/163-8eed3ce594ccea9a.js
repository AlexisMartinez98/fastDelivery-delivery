"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[163],{5163:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(5893),o=r(7294),i=e=>{let{buttonName:t,finalizar:r}=e;return(0,n.jsx)("button",{className:"bg-[#00EA77] text-[#3D1DF3] rounded-2xl w-[90%] h-9 mx-auto ",onClick:r,children:"".concat(t)})},a=r(6154),c=r(2920),s=r(1163),l=e=>{let{buttonName:t}=e,r=(0,s.useRouter)(),{id:o}=r.query;return(0,n.jsx)("button",{onClick:()=>{a.Z.put("http://localhost:4000/api/v1/delivery/cancelPackage/".concat(o)).then(()=>{c.Am.success("paquete cancelado"),r.push("/delivery/start_day")}).catch(e=>{console.error("Error al cancelar el paquete:",e)})},className:"text-[#ffffff] rounded-2xl w-[90%] h-9 border-[#00EA77] border-[2px] mx-auto",children:"".concat(t)})},d=r(1664),u=r.n(d),f=r(3380),p=r.n(f),m=r(7054),h=function(e){let{addressDestination:t}=e,[r,i]=(0,o.useState)(null),[a,c]=(0,o.useState)(null),[s,l]=(0,o.useState)(null),{isLoaded:d,loadError:u}=(0,m.Db)({googleMapsApiKey:"",libraries:["places"]}),f=async(e,t)=>{if(t){let t=new window.google.maps.Geocoder;t.geocode({address:e},(e,t)=>{if("OK"===t){if(e&&e[0]&&e[0].geometry){let t=e[0].geometry.location;c({lat:t.lat(),lng:t.lng()})}else console.error("No se encontraron resultados de geocodificaci\xf3n.")}else console.error("Error al geocodificar la direcci\xf3n:",t)})}};return((0,o.useEffect)(()=>{d&&(window.navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:r}=e.coords;i({lat:t,lng:r})}),f(t,d))},[d,t]),(0,o.useEffect)(()=>{if(r&&d&&a){let e=new window.google.maps.DirectionsService,t={origin:r,destination:a,travelMode:window.google.maps.TravelMode.DRIVING};e.route(t,(e,t)=>{"OK"===t?l(e):console.error("Error al calcular la ruta:",t)})}},[r,d,a]),u)?(0,n.jsx)("div",{children:"Error al cargar el mapa"}):(0,n.jsx)(n.Fragment,{children:d&&r?(0,n.jsx)(m.b6,{center:r,zoom:12,mapContainerStyle:{objectFit:"contain",height:"100%",borderRadius:"12px"},children:s&&(0,n.jsx)(m.tH,{directions:s})}):(0,n.jsx)("div",{className:"bg-red h-[100%] w-[100%] flex justify-center items-center",children:(0,n.jsx)(p(),{color:"red",loading:!0,cssOverride:{display:"block",margin:"0 auto",borderColor:"#3D1DF3"},size:100,"aria-label":"Loading Spinner","data-testid":"loader"})})})},v=r(1955),x=function(){let e=(0,s.useRouter)();(0,o.useEffect)(()=>{let t=v.Z.get("token");console.log("token",t),t||e.push("/login")},[]);let{id:t}=e.query,[r,d]=(0,o.useState)({address:"",receiver:"",_id:""});return(0,o.useEffect)(()=>{t&&a.Z.get("http://localhost:4000/api/v1/delivery/".concat(t)).then(e=>{d(e.data)}).catch(e=>{console.error(e)})},[t]),(0,n.jsxs)("main",{className:"mr-6 ml-6 mt-4 mb-8 font-poppins ",children:[(0,n.jsx)("div",{className:"profile-info rounded-tl-[10px] rounded-tr-[10px] text-[#3D1DF3] bg-[#C7FFB1] pb-2",children:(0,n.jsxs)("div",{className:"h-16 flex items-center justify-between  ",children:[(0,n.jsx)(u(),{href:"/delivery/start_day",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-8 h-8   ml-6 ",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 9l-3 3m0 0l3 3m-3-3h7.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,n.jsx)("h1",{className:"m-4 font-black text-lg ",children:"Reparto en curso"}),(0,n.jsx)("div",{className:"w-8 h-8  ml-6"})]})}),(0,n.jsxs)("div",{className:"py-5 bg-[#ffffff] rounded-xl relative top-[-7px] flex flex-col items-center ",children:[(0,n.jsx)("div",{className:"w-[90%] h-[327px] rounded-xl border-[#3D1DF3] border-[1.5px]",children:(0,n.jsx)(h,{addressDestination:r.address})}),(0,n.jsxs)("div",{className:"my-5 w-[90%] text-[0.90rem] font-semibold text-[#3D1DF3] ",children:[(0,n.jsxs)("p",{className:"mt-1",children:["Destino:"," ",(0,n.jsx)("span",{className:"font-light",children:"address"in r?r.address:"Sin informaci\xf3n"})]}),(0,n.jsxs)("p",{className:"mt-1",children:["N\xfamero de paquetes:"," ",(0,n.jsx)("span",{className:"font-light",children:"_id"in r?"#".concat(r._id.slice(0,5)):"Sin n\xfamero de paquetes"})]}),(0,n.jsxs)("p",{className:"mt-1",children:["Recibe:"," ",(0,n.jsx)("span",{className:"font-light",children:"receiver"in r?r.receiver:"Sin informaci\xf3n"})]})]}),(0,n.jsx)("div",{className:"w-[100%] flex justify-center mt-2",children:(0,n.jsx)(i,{buttonName:"Finalizar",finalizar:()=>{a.Z.put("http://localhost:4000/api/v1/delivery/finishDelivery/".concat(t)).then(()=>{e.push("/delivery/start_day"),c.Am.success("Paquete entregado.")}).catch(e=>{console.error(e)})}})})]}),(0,n.jsx)("div",{className:"w-[100%] flex justify-center my-3",children:(0,n.jsx)(l,{buttonName:"Cancelar entrega"})})]})}},3380:function(e,t,r){var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t},c=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)0>t.indexOf(n[o])&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r};Object.defineProperty(t,"__esModule",{value:!0});var s=a(r(7294)),l=r(6657),d=(0,r(10).createAnimation)("ClipLoader","0% {transform: rotate(0deg) scale(1)} 50% {transform: rotate(180deg) scale(0.8)} 100% {transform: rotate(360deg) scale(1)}","clip");t.default=function(e){var t=e.loading,r=e.color,o=void 0===r?"#000000":r,i=e.speedMultiplier,a=e.cssOverride,u=e.size,f=void 0===u?35:u,p=c(e,["loading","color","speedMultiplier","cssOverride","size"]),m=n({background:"transparent !important",width:(0,l.cssValue)(f),height:(0,l.cssValue)(f),borderRadius:"100%",border:"2px solid",borderTopColor:o,borderBottomColor:"transparent",borderLeftColor:o,borderRightColor:o,display:"inline-block",animation:"".concat(d," ").concat(.75/(void 0===i?1:i),"s 0s infinite linear"),animationFillMode:"both"},void 0===a?{}:a);return void 0===t||t?s.createElement("span",n({style:m},p)):null}},10:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createAnimation=void 0,t.createAnimation=function(e,t,r){var n="react-spinners-".concat(e,"-").concat(r);if("undefined"==typeof window||!window.document)return n;var o=document.createElement("style");document.head.appendChild(o);var i=o.sheet,a="\n    @keyframes ".concat(n," {\n      ").concat(t,"\n    }\n  ");return i&&i.insertRule(a,0),n}},6657:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.cssValue=t.parseLengthAndUnit=void 0;var r={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function n(e){if("number"==typeof e)return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();t=n.includes(".")?parseFloat(n):parseInt(n,10);var o=(e.match(/[^0-9]*$/)||"").toString();return r[o]?{value:t,unit:o}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}t.parseLengthAndUnit=n,t.cssValue=function(e){var t=n(e);return"".concat(t.value).concat(t.unit)}},1955:function(e,t,r){/*! js-cookie v3.0.5 | MIT */function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}r.d(t,{Z:function(){return o}});var o=function e(t,r){function o(e,o,i){if("undefined"!=typeof document){"number"==typeof(i=n({},r,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var c in i)i[c]&&(a+="; "+c,!0!==i[c]&&(a+="="+i[c].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+a}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var r=document.cookie?document.cookie.split("; "):[],n={},o=0;o<r.length;o++){var i=r[o].split("="),a=i.slice(1).join("=");try{var c=decodeURIComponent(i[0]);if(n[c]=t.read(a,c),e===c)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){o(e,"",n({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,n({},this.attributes,t))},withConverter:function(t){return e(n({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}}]);